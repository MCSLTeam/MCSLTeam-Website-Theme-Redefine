"use strict";const url=require("url"),fs=require("fs"),path=require("path"),yaml=require("js-yaml"),{version:version}=require("../../package.json");hexo.extend.helper.register("export_config",function(){let e={hostname:new URL(this.config.url).hostname||this.config.url,root:this.config.root,language:this.config.language};this.config.search&&(e.path=this.config.search.path);let t={articles:this.theme.articles,colors:this.theme.colors,global:this.theme.global,home_banner:this.theme.home_banner,plugins:this.theme.plugins,version:version,code_block:this.theme.code_block,navbar:this.theme.navbar,page_templates:this.theme.page_templates,home:this.theme.home,footerStart:this.theme.footer.start};const i=path.join(__dirname,"../../languages");let n=fs.readdirSync(i).find(e=>e===`${this.config.language}.yml`);n=i+"/"+(n||"en.yml");let o=fs.readFileSync(n,"utf8");try{o=yaml.load(o)}catch(e){console.log(e)}let s={masonry:!1};return this.theme.masonry&&(s.masonry=!0),`<script id="hexo-configurations">\n    window.config = ${JSON.stringify(e)};\n    window.theme = ${JSON.stringify(t)};\n    window.lang_ago = ${JSON.stringify(o.ago)};\n    window.data = ${JSON.stringify(s)};\n  <\/script>`});